<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="icon" href="/static/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/static/apple-touch-icon.png">
    <link rel="manifest" href="/static/manifest.webmanifest">
    <link rel="stylesheet" href="/static/style.css" />
    <link rel="stylesheet" href="/static/pygments.css" />
    <link rel="canonical" href="https://kalnytskyi.com/posts/setup-postgres-linux-windows-macos-gh-actions/" />
    <link rel="alternate" type="application/atom+xml" href="/feed.xml" title="Ihor Kalnytskyi" />

    <meta name="author" content="Ihor Kalnytskyi" />
    <meta name="description" content="GitHub Actions is a CI/CD platform integrated into your GitHub repository. In this post you can learn how to setup PostgreSQL server on any operating system supported by GitHub Actions, i.e. Windows, Linux and macOS." />

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@ikalnytskyi" />
    <meta name="twitter:title" content="Setup PostgreSQL for Linux, Windows and macOS using GitHub Actions" />
    <meta name="twitter:description" content="GitHub Actions is a CI/CD platform integrated into your GitHub repository. In this post you can learn how to setup PostgreSQL server on any operating system supported by GitHub Actions, i.e. Windows, Linux and macOS." />

    <meta property="og:title" content="Setup PostgreSQL for Linux, Windows and macOS using GitHub Actions" />
    <meta property="og:description" content="GitHub Actions is a CI/CD platform integrated into your GitHub repository. In this post you can learn how to setup PostgreSQL server on any operating system supported by GitHub Actions, i.e. Windows, Linux and macOS." />
    <meta property="og:url" content="https://kalnytskyi.com/posts/setup-postgres-linux-windows-macos-gh-actions/" />
    <meta property="og:site_name" content="Ihor Kalnytskyi" />
    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="2021-11-24T00:00:00+00:00" />
    <meta property="article:modified_time" content="2023-01-04T15:35:55.932868+00:00" />
    <meta property="article:author" content="Ihor Kalnytskyi" />

    <title>Setup PostgreSQL for Linux, Windows and macOS using GitHub Actions</title>
</head>
<body>
  <div class="banner"><a rel="nofollow" href="https://www.comebackalive.in.ua/donate">Save lives in Ukraine</a> â†’</div>

  <aside>
    <img class="about-pic" src="/about/me.jpg" alt="photo" />
    <span class="about-txt"><a href="/about/" rel="me">Ihor Kalnytskyi</a>'s<br />
thoughts & writings</span>

    <div class="nav-wrapper">
    <nav>
      <span><a href="/">Archives</a></span>
      <span><a href="/talks/">Talks</a></span>
      <span><a href="/feed.xml">Feed</a></span>
    </nav>
    </div>
  </aside>

  <main>
    <article>
      <header>
        <time datetime="2021-11-24T00:00:00+00:00">November 24, 2021</time>
        <h1>Setup PostgreSQL for Linux, Windows and macOS using GitHub Actions</h1>
      </header>

      <p>GitHub Actions is a CI/CD platform that is widely used among open-source
software hosted on GitHub. If you happened to host your software there, you may
end up needing a SQL server to test your application. PostgreSQL is the most
common choice nowadays.</p>
<p>As of today (Nov 24, 2021), there's only one <a href="https://github.com/marketplace/actions/setup-postgresql-for-linux-macos-windows">action on the marketplace</a> to
setup a PostgreSQL server for Linux, Windows and macOS action runners. If you
among those who want to test their software on all major platforms, you have no
option but to use <a href="https://github.com/ikalnytskyi/action-setup-postgres">ikalnytskyi/action-setup-postgres</a>. Below is the typical
usage example:</p>
<pre><code class="language-yaml"><span class="nt">steps</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Setup PostgreSQL</span>
<span class="w">    </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ikalnytskyi/action-setup-postgres@v4</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run tests using connection URI</span>
<span class="w">    </span><span class="nt">env</span><span class="p">:</span>
<span class="w">      </span><span class="nt">CONNECTION_STR</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ steps.postgres.outputs.connection-uri }}</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pytest -vv tests/</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run tests using connection kv-string</span>
<span class="w">    </span><span class="nt">env</span><span class="p">:</span>
<span class="w">      </span><span class="nt">CONNECTION_STR</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">service=${{ steps.postgres.outputs.service-name }}</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pytest -vv tests/</span>
</code></pre>
<p>So why use that exact action and no other?</p>
<ul>
<li>Runs on Linux, macOS and Windows action runners.</li>
<li>Adds PostgreSQL <a href="https://www.postgresql.org/docs/current/reference-client.html">client applications</a> to <code>PATH</code>.</li>
<li>Uses PostgreSQL binaries baked into <a href="https://github.com/actions/runner-images">GitHub Actions Runner Images</a>.</li>
<li>Easy <a href="https://github.com/ikalnytskyi/action-setup-postgres/blob/v4/action.yml">to prove</a> that it DOES NOT contain malicious code.</li>
</ul>

    </article>
  </main>
</body>