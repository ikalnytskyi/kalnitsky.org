<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="icon" href="/static/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/static/apple-touch-icon.png">
    <link rel="manifest" href="/static/manifest.webmanifest">
    <link rel="stylesheet" href="/static/style.css" />
    <link rel="stylesheet" href="/static/pygments.css" />
    <link rel="canonical" href="https://kalnytskyi.com/posts/setup-postgres-linux-windows-macos-gh-actions/" />
    <link rel="alternate" type="application/atom+xml" href="/feed.xml" title="Ihor Kalnytskyi" />

    <meta name="author" content="Ihor Kalnytskyi" />
    <meta name="description" content="A note about how to setup PostgreSQL server on GitHub CI." />

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@ikalnytskyi" />
    <meta name="twitter:title" content="Setup PostgreSQL for Linux, Windows and macOS using GitHub Actions" />
    <meta name="twitter:description" content="A note about how to setup PostgreSQL server on GitHub CI." />

    <meta property="og:title" content="Setup PostgreSQL for Linux, Windows and macOS using GitHub Actions" />
    <meta property="og:description" content="A note about how to setup PostgreSQL server on GitHub CI." />
    <meta property="og:url" content="https://kalnytskyi.com/posts/setup-postgres-linux-windows-macos-gh-actions/" />
    <meta property="og:site_name" content="Ihor Kalnytskyi" />
    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="2021-11-24T00:00:00+00:00" />
    <meta property="article:modified_time" content="2022-02-13T17:07:02.188732+00:00" />
    <meta property="article:author" content="Ihor Kalnytskyi" />

    <title>Setup PostgreSQL for Linux, Windows and macOS using GitHub Actions</title>
</head>
<body>
  <aside>
    <img class="about-pic" src="/about/me.jpg" alt="Ihor's photo" />
    <span class="about-txt"><a href="/about/" rel="me">Ihor Kalnytskyi</a>'s thoughts & writings</span>

    <div class="nav-wrapper">
    <nav>
      <span><a href="/">Archives</a></span>
      <span><a href="/talks/">Talks</a></span>
      <span><a href="/feed.xml">Feed</a></span>
    </nav>
    </div>
  </aside>

  <main>
    <article>
      <header>
        <time datetime="2021-11-24T00:00:00+00:00">November 24, 2021</time>
        <h1>Setup PostgreSQL for Linux, Windows and macOS using GitHub Actions</h1>
      </header>

      <p>As of today (Nov 24, 2021), there's only <a href="https://github.com/marketplace/actions/setup-postgresql-for-linux-macos-windows">one action on the marketplace</a> to
setup a PostgreSQL server for Linux, Windows and macOS runners. If you among
those who want to test their software on all major platforms, you have no
option but to use <a href="https://github.com/ikalnytskyi/action-setup-postgres">ikalnytskyi/action-setup-postgres</a>.</p>
<div class="highlight"><pre><span></span><code><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Setup PostgreSQL</span><span class="w"></span>
<span class="w">    </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ikalnytskyi/action-setup-postgres@v1</span><span class="w"></span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span><span class="w"></span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run tests</span><span class="w"></span>
<span class="w">    </span><span class="nt">env</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">CONNECTION_URI</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ steps.postgres.outputs.connection-uri }}</span><span class="w"></span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pytest -vv tests/</span><span class="w"></span>
</code></pre></div>

<p>Key features:</p>
<ul>
<li>Fast bootstrap (the action uses preinstalled binaries).</li>
<li>Fast audit (<a href="https://github.com/ikalnytskyi/action-setup-postgres/blob/v1/action.yml">4 steps YAML</a>, no javascript/typescript).</li>
</ul>
    </article>
  </main>
</body>